---
import ThemeToggle from '@components/ui/ThemeToggle.astro'
import { PUBLIC_API_URL } from 'astro:env/client'

const { title, description, customScriptPath } = Astro.props
---

<!doctype html>
<html lang="es" data-bs-theme="auto">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="BookStudio es un sistema de biblioteca para gestionar préstamos, libros, autores y otros recursos, facilitando la administración y seguimiento de los préstamos."
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="/js/shared/setup/color-modes.js" is:inline></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <link rel="stylesheet" href="/css/views/auth.css" />

    <link href="/images/logo-dark.png" rel="icon" media="(prefers-color-scheme: light)" />
    <link href="/images/logo-light.png" rel="icon" media="(prefers-color-scheme: dark)" />

    <title>{title} - BookStudio</title>
  </head>
  <body>
    <!-- Background -->
    <div class="position-fixed w-100 h-100 bg-body"></div>

    <!-- Centered container -->
    <div class="d-flex justify-content-center align-items-center vh-100">
      <main class="w-100 mx-4" style="max-width: 384px;">
        <section class="card border">
          <!-- Card header -->
          <header class="card-header text-center">
            <img
              class="logo mt-1 mb-2"
              alt="Logo de BookStudio"
              src="/images/logo-light.png"
              width="40"
            />
            <h3 class="fw-bold mb-0 text-body-emphasis">{title}</h3>
            <p class="text-muted mb-0">{description}</p>
          </header>

          <!-- Card body -->
          <div class="card-body">
            <slot />
          </div>
        </section>
      </main>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Theme toggle button -->
    <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3">
      <ThemeToggle />
    </div>

    <!-- External Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    ></script>

    <script
      is:inline
      set:html={`
      window.APP_CONFIG = {
        PUBLIC_API_URL: "${PUBLIC_API_URL}"
      };
    `}
    />

    <!-- Custom Scripts -->
    {customScriptPath && <script type="module" src={customScriptPath} />}
  </body>
</html>
